@layer components {
  .zen-typer {
    position: relative;
    font-size: 1.2rem;
    white-space: pre-wrap;
    word-break: break-word;
    tab-size: 2;

    [data-typer-state='incomplete'] {
      display: none;
    }

    [data-typer-state='incomplete'],
    [data-typer-state='active'] {
      &:is(a, .link) {
        &::after {
          display: none;
        }
      }
    }

    // crazy margin trimming

    :is(
      p,
      :is(ul, ol),
      :is(ul, ol) li,
      blockquote,
      pre,
      code,
      table,
      details,
      hr,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6
    ) {
      &:not(:is(ul, ol) :is(ul, ol)):nth-child(1 of :not([data-typer-state='incomplete'])) {
        margin-top: 0;
      }

      &:nth-last-child(1 of :not([data-typer-state='incomplete'])) {
        margin-bottom: 0;
      }
    }

    &--scroll {
      overflow-y: auto;
      scrollbar-gutter: stable;
      padding-right: 1rem;

      @media (pointer: coarse) {
        padding-left: 8px;
        padding-right: 8px;
      }
    }

    &--no-wrap {
      white-space: pre;
    }
  }

  .zen-typer-html {
    margin: 1rem 0;
    padding: 1rem;
    border: var(--bo);
    font: normal normal var(--f-size-base) / normal var(--f-base);
    white-space: normal;

    hr {
      margin: 2rem 0;
    }
  }
}
